2009-11-07 Pierre Wieser <pwieser@trychlos.org>

	* configure.ac: Bump version number to 1.12.4

	Releasing Nautilus-Actions 1.12.3

	* NEWS: Udated.

2009-10-29 Pierre Wieser <pwieser@trychlos.org>

	* src/common/na-action.c (object_copy): Fix copy of profiles.

2009-10-28 Pierre Wieser <pwieser@trychlos.org>

	* src/utils/nautilus-actions-new.c:
	Update command-line args to specify an URI.

	* src/common/na-xml-writer.c (na_xml_writer_output_xml):
	Write XML buffer to stdout when asked for.
	Update comment.

	* src/utils/console-utils.c:
	* src/utils/console-utils.h: New files.

	* src/utils/Makefile.am: Updated accordingly.

	* src/utils/nautilus-actions-new.c:
	* src/utils/nautilus-actions-schemas.c:	Initialize log handler
	to not emit debug messages when not in maintainer mode.

2009-10-26 Pierre Wieser <pwieser@trychlos.org>

	* src/nact/nact-xml-reader.c (add_message):
	Use XML markup to print messages embedding XML tags.

	* src/nact/nact-assistant-export.ui:
	Make the Export assistant be transient relatively to main window.
	Make the Import assistant be transient relatively to main window.

	Fix crash when running Export assistant.

	* src/nact/nact-tree-model.c:
	* src/nact/nact-tree-model.h
	(nact_tree_model_new, nact_tree_model_runtime_init_dnd):
	Takes a NactWindow as argument instead of NactMainWindow.

	* src/nact/nact-iactions-list.c
	(nact_iactions_list_initial_load, nact_iactions_list_runtime_init):
	Updated accordingly.

	* src/nact/nact-main-window.c (register_type):
	No more implements the NAIPrefs interface (moved to NactWindow).

	* src/nact/nact-window.c (register_type):
	Implements NAIPrefs interface.

	* src/nact/nact-assistant-export.ui:
	* src/nact/nautilus-actions-config-tool.ui:
	Remove terminating dot from radio button labels.

	* src/common/na-about.c (na_about_display):
	Do not mark authors names and emails for translating (#599520).

	* configure.ac: Bump version number to 1.12.3.

2009-10-20 Pierre Wieser <pwieser@trychlos.org>

	* configure.ac: Bump version number.

	* src/nact/nact-iaction-tab.c (on_icon_browse):
	Fix widget name.

2009-10-19 Pierre Wieser <pwieser@trychlos.org>

	* NEWS: Updated.

	* src/nact/nact-imenubar.c:
	Remove New menu and Preferences cross-references.

	* src/nact/nact-window.c (nact_window_signal_connect):
	Check GObject validity.

2009-10-14 Pierre Wieser <pwieser@trychlos.org>

	* src/nact/nact-window.c (instance_dispose):
	Only disconnect not null handlers.

	* src/nact/nact-main-window.c (get_selected_object):
	Only returns an object when selection is unique.

	* src/nact/nact-imenubar.c:
	* src/nact/nautilus-actions-config-tool.actions:
	Remove New menu and Preferences items.

	* po/POTFILES.in:
	* src/nact/Makefile.am:
	New file src/nact/nact-assistant-export.ui.

	* src/nact/nact-assistant.c:
	* src/nact/nact-assistant.h (get_ui_fname): New virtual function.

	* src/nact/nact-assistant-export.c:
	Define a specific UI filename.

	* src/nact/nautilus-actions-config-tool.ui:
	Make some ids unique inside the file (why not all ??)

2009-08-30 Pierre Wieser <pwieser@trychlos.org>

	* data/nautilus-actions.schemas.in:
	Remove schema for 'Use submenu' preference.
	Add schemas for 'Add About' and 'Alphabetical order' preferences.

	* doc/objects-hierarchy.odg:
	Update doc to show new NAObjectItem and NAActionMenu classes.

	* src/common/na-action-class.h:
	NAAction is now derived from NAObjectItem.

	* src/common/na-action-profile.c:
	Remove PROP_NAPROFILE_NAME and PROP_NAPROFILE_LABEL properties.
	Remove duplicate() virtual function.
	Add new() and get_clipboard_id() virtual functions.

	* src/common/na-action.c:
	Remove PROP_NAACTION_UUID, PROP_NAACTION_LABEL,
	PROP_NAACTION_TOOLTIP and PROP_NAACTION_ICON properties.
	Remove duplicate() and check_edited_status() virtual functions.
	Add new() and get_clipboard_id() virtual functions.

	* src/common/na-action-menu.c:
	* src/common/na-action-menu.h: New files.

	* src/common/na-gconf.c:
	Now watches for preferences directory to manage display mode in
	Nautilus.

	* src/common/na-iduplicable.c:
	* src/common/na-iduplicable.h:
	Replace duplicate() virtual function with copy() and new().
	All interface is now declared with NAIDuplicable instead of NAObject.

	* src/common/na-iio-provider.c:
	* src/common/na-iio-provider.h:
	Temporarily sort read actions.
	Define NA_IIO_PROVIDER_SIGNAL_DISPLAY_ORDER_CHANGED and
	NA_IIO_PROVIDER_SIGNAL_DISPLAY_ABOUT_CHANGED new signals.

	* src/common/na-ipivot-consumer.c:
	Take advantage of new signals defined in na-iio-provider.h.
	Define on_display_about_changed() and on_display_order_changed()
	new virtual functions.

	* src/common/na-iprefs.c:
	* src/common/na-iprefs.h (na_iprefs_get_alphabetical_order,
	na_iprefs_get_add_about_item): New functions.

	* src/common/na-object.c:
	* src/common/na-object.h (new, copy, get_clipboard_id):
	New virtual functions.

	* src/common/na-object-item.c:
	* src/common/na-object-item.h: New files.

	* src/common/na-pivot.c:
	Take advantage of new signals defined in na-iio-provider.h.

	* src/common/na-utils.c:
	* src/common/na-utils.h (na_utils_remove_last_level_from_path,
	na_utils_is_writable_dir, na_utils_exist_file): New functions.

	* src/common/na-xml-writer.c:
	* src/common/na-xml-writer.h (na_xml_writer_get_output_fname,
	na_xml_writer_get_xml_buffer, na_xml_writer_output_xml):
	New functions.

	* src/nact/egg-tree-multi-dnd.c:
	* src/nact/egg-tree-multi-dnd.h: New files.

	* src/nact/nact-application.c:
	No more display debug message in appli_get_application_name().

	* src/nact/nact-assistant-export.c
	(on_actions_list_selection_changed): Use actual parameters types.
	(is_writable_dir): Removed function.

	* src/nact/nact-iaction-tab.c:
	* src/nact/nact-iaction-tab.h
	(get_selected): Removed virtual function.
	(nact_iaction_tab_set_action): Add selected items parameter.

	* src/nact/nact-iactions-list.c:
	* src/nact/nact-iactions-list.h:
	Implements drag from the tree view based on a dedicated
	NactTreeModel.
	Remove virtual function on_selection_changed().
	nact_iactions_list_get_selected_items(),
	nact_iactions_list_set_dnd_mode(): New functions.

	* nact/nact-imenubar.c:
	* nact/nact-imenubar.h:
	Add 'New menu' item in the menubar.
	Define new insert_item() virtual function.

	* src/nact/nact-main-window.c:
	* src/nact/nact-main-window.h:
	Implements NaIPrefs interface.
	Be kept informed of preferences modifications.

	* src/nact/nact-preferences-editor.c:
	Replace 'Display as submenu' by 'Add About' and 'Display in
	alphabetical order' preferences.

	* src/nact/nact-selection.c:
	* src/nact/nact-selection.h: New files.

	* src/nact/nact-tree-model.c:
	* src/nact/nact-tree-model.h: New files.

	* src/plugin/nautilus-actions.c:
	Creates submenus if asked for.
	Adds 'About Nautilus Actions' item is asked for.

2009-08-25 Pierre Wieser <pwieser@trychlos.org>

	* configure.ac: Add a comment about bug #589745.
	Add a comment about
	nautilus_menu_provider_emit_items_updated_signal().

	* src/common/na-object.h: Fix typo.

	* src/common/na-iio-provider.c:
	Sort the actions in the same order as they are displayed.

	* src/nact/nact-assistant.c:
	* src/nact/nact-assistant.h:
	Implement a work-around for bug #589745 (apply message).
	Remove on_escape_key_pressed() virtual function.

	* nact/nact-assistant-export.c:
	* src/nact/nact-assistant-import.c:
	Can now do the operations in the on_assistant_apply() functions.

	* src/nact/nact-iactions-list.c:
	Returns selected actions in the same order as they are displayed.

2009-08-24 Pierre Wieser <pwieser@trychlos.org>

	* Makefile.am:
	make distcheck uses now '--enable-iso-c' option.

	* configure.ac:
	Add '-pedantic' as '--enable-iso-c' default option.
	Add also '-Wno-overlength-strings' to handle long strings in
	src/common/xml-names.h.

	* m4/na-compiler-flags.m4:
	Fix '--enable-iso-c' macro to correctly handle provided values.

	* src/common/na-about.c:
	* src/common/na-action-profile.c:
	* src/common/na-action.c:
	* src/common/na-gconf.c:
	* src/common/na-iduplicable.c:
	* src/common/na-iio-provider.c:
	* src/common/na-iio-provider.h:
	* src/common/na-ipivot-consumer.c:
	* src/common/na-iprefs.c:
	* src/common/na-object.c:
	* src/common/na-pivot.c:
	* src/common/na-utils.c:
	* src/common/na-xml-writer.c:
	* src/nact/base-application.c:
	* src/nact/base-window.c:
	* src/nact/nact-application.c:
	* src/nact/nact-assistant-export.c:
	* src/nact/nact-assistant-import.c:
	* src/nact/nact-assistant.c:
	* src/nact/nact-iaction-tab.c:
	* src/nact/nact-iactions-list.c:
	* src/nact/nact-iadvanced-tab.c:
	* src/nact/nact-icommand-tab.c:
	* src/nact/nact-iconditions-tab.c:
	* src/nact/nact-imenubar.c:
	* src/nact/nact-iprefs.c:
	* src/nact/nact-main-window.c:
	* src/nact/nact-preferences-editor.c:
	* src/nact/nact-window.c:
	* src/nact/nact-xml-reader.c:
	* src/plugin/nautilus-actions.c:
	* src/plugin/nautilus-module.c:
	* src/test/test-parse-uris.c:
	* src/utils/nautilus-actions-new.c:
	* src/utils/nautilus-actions-schemas.c:
	Compile with -pedantic gcc option.

	* src/common/na-xml-names.h:
	Long names are rewritten on several lines for more readability.

	* src/nact/nact-assistant.c:
	* src/nact/nact-window.c:
	Remove superfluous calls to g_type_init().

	* src/nact/nact-imenubar.c:
	Do not try to delete an object when the list is empty (as Delete
	accelerator is always active, even if the Delete menu item is not).

2009-08-23 Pierre Wieser <pwieser@trychlos.org>

	Get rid of unwanted notifications.
	Use UI Manager.

	* src/common/na-ipivot-consumer.c:
	* src/common/na-ipivot-consumer.h (na_ipivot_consumer_delay_notify):
	New function.

	* src/common/na-object.c: Accept NULL origin.

	* src/nact/base-application.c:
	Fix #592781: use explicit format strings.
	Fix test of virtual functions which caused double calls.

	* src/nact/nact-application.c:
	Remove the UI_XML_FILENAME variable.

	* src/nact/nact-imenubar.c:
	Rewrite save function to allow saving all modified actions in one pass.
	Take advantage of na_ipivot_consumer_delay_notify().
	Use UI Manager, thus removing all helper functions.
	Remove nact_imenubar_on_delete_key_pressed() function.

	* src/nact/nact-main-window.c:
	No more call nact_imenubar_on_delete_key_pressed() function.

	* src/nact/nautilus-actions-config-tool.actions:
	Add Preferences item in the Edit menu.

2009-08-21 Pierre Wieser <pwieser@trychlos.org>

	Add About Nautilus Actions item in Nautilus context menu.

	* src/common/na-about.c:
	* src/common/na-about.h: New files.

	* po/POTFILES.in:
	* src/common/Makefile.am: Updated accordingly.

	* src/nact/nact-application.c:
	Call na_about_get_icon_name() to get application default icon.

	* src/nact/nact-imenubar.c:
	Call na_about_display() to display About dialog box.

	* src/plugin/nautilus-actions.c:
	Add About Nautilus Actions item in Nautilus context menu.

2009-08-20 Pierre Wieser <pwieser@trychlos.org>

	Display actions as a submenu.

	* data/nautilus-actions.schemas.in:
	Add schemas for Preferences dialog and AsSubmenu option.

	* src/common/na-iprefs.c:
	* src/common/na-iprefs.h: New files.
	Manage preferences which are used by Nautilus-Actions plugin.

	* src/common/na-gconf.c: Fix typo.

	* src/common/Makefile.am: Updated accordingly.

	* src/nact/nact-application.c:
	Rename GLADEDIR to PKGDATADIR.
	Rename GLADE_FILENAME to UI_XML_FILENAME.

	* src/nact/nact-imenubar.c:
	Add an item in the menubar to run the Preferences dialog.
	Rename MenuBarVBox to MenubarVBox to be consistent with Statusbar.

	* src/nact/nact-iprefs.c:
	* src/nact/nact-iprefs.h: Fix typos.

	* src/nact/nact-preferences-editor.c:
	* src/nact/nact-preferences-editor.h: New files.
	Let the user edit its preferences.

	* src/nact/nautilus-actions-config-tool.ui:
	Creates the PreferencesDialog dialog.
	Enabled and ReadOnly checkboxes no longer expand to all dialog
	width to minimize focus errors.
	Rename MenuBarVBox to MenubarVBox to be consistent with Statusbar.

	* src/nact/Makefile.am: Updated accordingly.
	Rename GLADEDIR to PKGDATADIR.

	* src/plugin/nautilus-actions.c:
	Take into account the DisplayAsSubmenu preference.

2009-08-19 Pierre Wieser <pwieser@trychlos.org>

	* src/nact/nact-statusbar.c:
	* src/nact/nact-statusbar.h: New files.

	* src/nact/nact-iaction-tab.c:
	* src/nact/nact-iaction-tab.h:
	* src/nact/nact-icommand-tab.c:
	* src/nact/nact-icommand-tab.h:
	* src/nact/nact-imenubar.c:
	* src/nact/nact-imenubar.h:
	* src/nact/nact-main-window.c:
	* src/nact/nact-main-window.h:
	Updated to take advantage of new nact_statusbar_display_status()
	and nact_statusbar_hide_status() functions.
	Removed get_status_bar() virtual functions from the interfaces.

2009-08-18 Pierre Wieser <pwieser@trychlos.org>

	* src/nact/base-application-class.h:
	* src/nact/base-application.c:
	* src/nact/base-application.h:
	Rewrite BaseApplication base class, and document all public
	and virtual functions.
	Define exit codes when an error occurs.
	Define some standard error messages.

	* src/nact/nact-application.c:
	* src/nact/nact-application.h
	(appli_initialize_unique_app): Customize error message.
	(appli_initialize_application): Complete application initialization.

	* src/nact/nact-xml-reader.c: Add nact-main-window.h header.

	* src/nact/nact-iaction-tab.c:
	* src/nact/nact-iaction-tab.h:
	* src/nact/nact-iadvanced-tab.c:
	* src/nact/nact-iadvanced-tab.h:
	* src/nact/nact-icommand-tab.c:
	* src/nact/nact-icommand-tab.h:
	* src/nact/nact-iconditions-tab.c:
	* src/nact/nact-iconditions-tab.h:
	Remove nact_ixxxx_tab_reset_last_focus function.
	Remove focus-in-event and switch-page signal connections.

	* src/nact/nact-main-window.c:
	No more call nact_ixxxx_tab_reset_last_focus functions.

2009-08-11 Pierre Wieser <pwieser@trychlos.org>

	* src/nact/nact-icommand-tab.c:
	* src/nact/nautilus-actions-config-tool.ui:
	Cleanup code.

	* src/nact/nact-iaction-tab.c:
	* src/nact/nact-icommand-tab.c:
	* src/nact/nautilus-actions-config-tool.ui:
	Set a mnemonic for all entry fields.

2009-08-10 Pierre Wieser <pwieser@trychlos.org>

	* data/nautilus-actions.schemas.in:
	Add schema description for 'enabled' action property.

	* src/common/na-action.c:
	* src/common/na-action.h:
	Define 'enabled' new action property.

	* src/common/na-gconf-keys.h:
	* src/common/na-xml-names.h:
	Define GConf entry and schema description for 'enabled' property.

	* src/common/na-gconf.c:
	Read 'enabled' property from GConf.

	* src/common/na-xml-writer.c:
	* src/nact/nact-xml-reader.c:
	Import and export 'enabled' action property.

	* src/nact/nact-iaction-tab.c:
	* src/nact/nautilus-actions-config-tool.ui:
	Display and update 'enabled' action property.

	* src/plugin/nautilus-actions.c:
	Do not display item if action is disabled.

	* src/utils/nautilus-actions-new.c:
	Add '--enabled' command-line option.

2009-08-09 Pierre Wieser <pwieser@trychlos.org>

	* src/nact/nact-assistant-export.c:
	* src/nact/nact-assistant-import.c:
	Fix #590709: Too much markup in translatable strings (reported
	by Claude Paroz).

	* src/nact/nact-iadvanced-tab.c:
	Fix #590711: String containing pipe char is ambiguous to
	translate (reported by Claude Paroz).

2009-08-03 Pierre Wieser <pwieser@trychlos.org>

	* data/nautilus-actions.schemas.in:
	* data/Makefile.am: New files.

	* configure.ac:
	* Makefile.am: Updated accordingly.

	* Makefile.am:
	* src/nact/Makefile.am:
	Remove nautilus-actions subdirectories at uninstall time.

	* src/common/na-xml-writer.c:
	Fix schemas generation (long description tag).

2009-08-01 Pierre Wieser <pwieser@trychlos.org>

	* configure.ac:
	Update version number to 1.11.3.

	* configure.ac:
	* Makefile.am:
	* doc/Makefile.am:
	* doc/objects-hierarchy.odg:
	Distribute a description of objects hierarchy.
	Fix #590398 (install doc)

2009-07-30 Pierre Wieser <pwieser@trychlos.org>

	* src/common/na-action-profile.c:
	* src/common/na-xml-names.h:
	* src/nact/nact-icommand-tab.c:
	* src/nact/nautilus-actions-config-tool.ui:
	Add %p (port number) and %R (list of URIs) parameters.

	* src/nact/nact-iactions-list.c:
	* src/nact/nautilus-actions-config-tool.ui:
	Define mnemonic for the actions list.
	Report the same feature on export assistant.

	* src/nact/nautilus-actions-config-tool.ui:
	Define mnemonic and tooltip for each tab of the notebook.

2009-07-29 Pierre Wieser <pwieser@trychlos.org>

	* exports/nautilus-actions.schema.in:
	Remove files as it is rebuildable via nautilus-actions-schemas.

	* m4/na-cmdline-tools.m4: Deleted file.

	* m4/na-log-domains.m4:
	Define a new log domain for test programs.

	* src/common/na-gnome-vfs-uri.c:
	* src/common/na-gnome-vfs-uri.h: New files.

	* src/common/na-action-profile.c:
	Take advantage of new na_gnome_vfs_uri_parse() function.

	* src/test/test-parse-uris.c:
	* src/test/test-parse-uris.h: New files.

	* src/common/na-xml-names.h:
	* src/nact/nautilus-actions-config-tool.ui:
	Remove all mentions of GnomeVFS or GVfs.

	* src/common/na-action-profile.c:
	* src/common/na-action.c:
	* src/common/na-action.h:
	* src/common/na-gconf.c:
	* src/common/na-iio-provider.c:
	* src/common/na-xml-writer.c:
	* src/utils/nautilus-actions-schema.c:
	Factorize the definition of default labels.

	* po/POTFILES.in: Update the list of translatable files.

2009-07-28 Pierre Wieser <pwieser@trychlos.org>

	* src/common/na-iio-provider.c:
	Write action now accepts a NULL NAPivot to deal with command-line
	utility.

	* src/common/na-xml-names.h:
	Define new FORMAT_GCONFSCHEMA format to create a schema.

	* src/nact/nact-assist-export.{c,h}:
	Renamed as src/nact/nact-assistant-export.{c,h}.

	* src/nact/nact-assist-import.{c,h}:
	Renamed as src/nact/nact-assistant-import.{c,h}.

	* src/nact/nact-gconf-keys.h:
	Renamed as src/common/na-xml-names.h.

	* src/nact/nact-gconf-writer.{c,h}:
	Renamed as src/common/na-xml-writer.{c,h}.
	Create a schema on FORMAT_GCONFSCHEMA format.

	* src/nact/nact-gconf-reader.{c,h}:
	Renamed as src/nact/nact-xml-reader.{c,h}.

	* src/nact/nact-import-export-format.h:
	* src/nact/nact-iprofiles-list.{c,h}: Removed files.

	* src/nact/nautilus-actions-config.ui:
	Renamed as src/nact/nautilus-actions-config-tool.ui.

	* src/utils/nautilus-actions-new-config.c:
	Renamed as src/utils/nautilus-actions-new.c.

	* src/utils/nautilus-actions-tools-utils.c:
	* src/utils/nautilus-actions-tools-utils.h: Removed files.

	* src/utils/nautilus-actions-schema.c: New file.

	* configure.ac:
	* src/common/Makefile.am:
	* src/nact/Makefile.am:
	* src/nact/nact-application.c:
	* src/nact/nact-assist-export.c:
	* src/nact/nact.desktop.in
	* src/utils/Makefile.am: Updated accordingly.

	* m4/na-log-domains.m4:
	Define a new log domain for utilities.

2009-07-27 Pierre Wieser <pwieser@trychlos.org>

	* m4/na-log-domains.m4: New file.

	* m4/nact-cmdline-tools.m4: Renamed to m4/na-cmdline-tools.m4.
	* m4/nact-compiler-flags.m4: Renamed to m4/na-compiler-flags.m4.
	* m4/nact-maintainer-mode.m4: Renamed to m4/na-maintainer-mode.m4.
	* m4/nact-nautilus-extdir.m4: Renamed to m4/na-nautilus-extdir.m4.

	* configure.ac: Updated accordingly.

	* src/common/na-object.c:
	* src/common/na-object.h (na_object_check_edited_status):
	New derivable function.

	* src/common/na-action.c:
	Implements check_edited_status for profiles.

	* src/common/na-utils.c:
	* src/common/na-utils.h (na_utils_path_to_key):
	New function moved from na-gconf.c.

	* src/nact/nact-window.c:
	* src/nact/nact-window.h
	(nact_window_set_current_action, nact_window_warn_action_modified,
	nact_window_warn_profile_modified): Removed functions.

	* src/nact/nact-gconf-reader.c:
	Import the two new export formats.
	Fix check of imported actions.

	* src/nact/nact-main.c:
	* src/plugin/nautilus-module.c:
	Disable output of g_debug messages when not in maintainer mode.

	* src/nact/nact-main-window.c:
	Update count_modified_actions.

2009-07-26 Pierre Wieser <pwieser@trychlos.org>

	* src/common/na-action.h:
	Move export format enumeration to src/nact/nact-assist-export.c.

	* src/common/na-gconf.c:
	Fix #325585 by deleting a schema which may be directly attached
	to the action.

	* src/nact/nact-iaction-tab.c:
	* src/nact/nact-iactions-list.c:
	* src/nact/nact-iadvanced-tab.c:
	* src/nact/nact-iconditions-tab.c:
	* src/nact/nact-imenubar.c:
	* src/nact/nact-main-window.c:
	Fix selection when removing last action, or entering with
	no action at all.
	Sets the modification indicator to be application-wide.

	* src/nact/base-application-class.h:
	* src/nact/base-window-class.h: New files.

	* src/nact/base-application.c:
	* src/nact/base-application.h
	(base_application_get_ui_filename): New function.

	* src/nact/nact-assistant.c:
	Reload the GtkBuilder XML file each time we run the assistant
	(see http://bugzilla.gnome.org/show_bug.cgi?id=589746).

	* src/nact/nact-import-export-format.h: New file.

	* src/nact/nact-assist-export.c:
	* src/nact/nact-gconf-writer.c:
	Introduce two new export formats.

2009-07-25 Pierre Wieser <pwieser@trychlos.org>

	* src/common/na-action-class.h:
	* src/common/na-action-profile-class.h:
	New files to properly handle forward declarations.

	* src/common/na-ipivot-container.c:
	* src/common/na-ipivot-container.h:
	Renamed as na-ipivot-consumer.{c,h}.

	* src/common/na-iduplicable.c:
	* src/common/na-iduplicable.h:
	New NAIDuplicable interface implemented by NAObject class.

	* src/nact/nact-imenubar.c:
	* src/nact/nact-imenubar.h:
	New NactIMenubar interface implemented by NactMainWindow class.

2009-07-19 Pierre Wieser <pwieser@trychlos.org>

	* src/nact/nact-action-conditions-editor.c:
	* src/nact/nact-action-conditions-editor.h:
	* src/nact/nact-action-profiles-editor.c:
	* src/nact/nact-action-profiles-editor.h:
	* src/nact/nact-profile-conditions-editor.c:
	* src/nact/nact-profile-conditions-editor.h: Removed files.

	* src/nact/Makefile.am: Updated accordingly.

	* src/nact/nact-iactions-list.c:
	* src/nact/nact-iactions-list.h
	(nact_iactions_list_toggle_collapse,
	nact_iactions_list_update_selected): New functions.
	Uses GtkSortable interface.
	Remove set_sorted_actions API.

	* src/nact/nact-icommand-tab.c:
	Disable the example label when there is no current profile.

	* src/nact/nact-iconditions-tab.c:
	* src/nact/nact-iconditions-tab.h
	(nact_iconditions_tab_get_isfiledir,
	nact_iconditions_tab_get_multiple): New functions.

	* src/nact/nact-iadvanced-tab.c:
	* src/nact/nact-iadvanced-tab.h (nact_iadvanced_tab_get_schemes):
	New function.

	* src/nact/nact-main-window.c:
	Update menu tooltips to be dot-terminated.
	New action is taken from GTK_STOCK_NEW.

	* src/nact/nautilus-actions-config.ui:
	Example label now wraps on more than two lines.
	Scheme lists now is more than four rows.
	All fields have tooltip.

2009-07-18 Pierre Wieser <pwieser@trychlos.org>

	* src/common/na-action.c:
	* src/common/na-action.c (na_action_are_equal):
	Function takes const arguments.

	* src/nact/base-application.c:
	* src/nact/nact-iaction-tab.c:
	Disable debug message.

	* src/nact/nact-iactions-list.c:
	* src/nact/nact-iactions-list.h (set_sorted_actions):
	New virtual function: advertise the implementer of the interface
	of the new address of the sorted list.
	Use GtkTreeModelFilter to display actions and profiles.
	Enable connecting lines in tree view.

	* src/nact/nact-icommand-tab.c:
	* src/nact/nact-icommand-tab.h:
	New files which define NactICommandTab interface.

	* src/nact/nact-iconditions-tab.c:
	* src/nact/nact-iconditions-tab.h:
	New files which define NactIConditionsTab interface.

	* src/nact/nact-iadvanced-tab.c:
	* src/nact/nact-iadvanced-tab.h:
	New files which define NactIAdvancedTab interface.

	* src/nact/nact-iprofile-item.c:
	* src/nact/nact-iprofile-item.h:
	* src/nact/nact-iprofiles-list.c:
	* src/nact/nact-iprofiles-list.h:
	Removed files.

	* src/nact/Makefile.am: Updated accordingly.

	* src/nact/nact-main-window.c:
	Setup display of the window title and of the menu depending of
	the currently selected action and its status.
	Implements ICommandTab interface.

	* src/nact/nact-window.c:
	* src/nact/nact-window.c (nact_window_warn_count_modified):
	New function.

2009-07-16 Pierre Wieser <pwieser@trychlos.org>

	* configure.ac:
	Get ride of libglade, libgnome, libgnomeui deprecated libraries.

	* src/nact/nact-profile-conditions-editor.c:
	Align widgets.

2009-07-16 Pierre Wieser <pwieser@trychlos.org>

	* src/nact/base-window.c:
	* src/nact/nact-main-window.c:
	* src/nact/nact-action-conditions-editor.c:
	* src/nact/nact-action-profiles-editor.c:
	* src/nact/nact-profile-conditions-editor.c:
	Make all dialogs transient for their parent in BaseWindow.

2009-07-16 Pierre Wieser <pwieser@trychlos.org>

	* configure.ac:
	Get ride of libglade, libgnome, libgnomeui deprecated libraries.

	* src/nact/nact-profile-conditions-editor.c:
	Align widgets.

2009-07-16 Pierre Wieser <pwieser@trychlos.org>

	* src/nact/base-window.c:
	* src/nact/nact-main-window.c:
	* src/nact/nact-action-conditions-editor.c:
	* src/nact/nact-action-profiles-editor.c:
	* src/nact/nact-profile-conditions-editor.c:
	Make all dialogs transient for their parent in BaseWindow.

2009-07-16 Pierre Wieser <pwieser@trychlos.org>

	* src/common/na-action.c:
	* src/common/na-action.h (na_action_get_new_profile_name):
	New function.

	* src/nact/nact-iprofile-conditions.c:
	* src/nact/nact-iprofile-conditions.h:
	Renamed as nact-iconditions.{c,h}.
	IProfileConditions renamed accordingly.

	* src/nact/nact-iprofile-item.c:
	* src/nact/nact-iprofile-item.h: New files.
	Define IProfileItem interface.

	* src/nact/nact-action-conditions-editor.c:
	* src/nact/nact-profile-conditions-editor.c:
	* src/nact/nact-iprefs.c:
	* src/nact/Makefile.am: Updated accordingly.

2009-07-15 Pierre Wieser <pwieser@trychlos.org>

	* src/nact/nact-action-conditions-editor.c (on_save_clicked):
	New function (do not know why it used to work without it!).

	* src/nact/nact-action-conditions-editor.c
	(set_current_action): Removed function.

	* src/nact/nact-action-profiles-editor.c:
	Begin with the rewriting with the new object hierarchy and the
	new interfaces.

	* src/nact/nact-iprofiles-list.c:
	* src/nact/nact-iprofiles-list.h: New files.

	* src/nact/nact-iactions-list.c:
	* src/nact/nact-iactions-list.h:
	Remove references to NAPivot, rather use interface.
	Now directly attach the NAAction to each line of the listbox.

	* src/nact/Makefile.am: Updated accordingly.

	* src/nact/nact-window.c:
	* src/nact/nact-window.h
	(nact_window_get_action, nact_window_get_actions):
	Removed functions.

2009-07-14 Pierre Wieser <pwieser@trychlos.org>

	* src/common/na-utils.c:
	Implement na_utils_schema_to_gslist function.

	* src/nact/nact-assist-import.c:
	Write the imported action to the I/O provider.

2009-07-14 Pierre Wieser <pwieser@trychlos.org>

	* configure.ac: Bump version number to 1.11.2.

2009-07-14 Pierre Wieser <pwieser@trychlos.org>

	Implement import assistant with new object hierarchy.

	* src/common/na-action.c:
	* src/common/na-action.h (na_action_get_profile):
	Now returns a NAObject.

	* src/common/na-action.c:
	* src/common/na-action.h
	(na_action_set_uuid, na_action_set_version,
	na_action_add_profile): New functions.

	* src/common/na-action-profile.c:
	* src/common/na-action-profile.h
	(na_action_profile_set_label, na_action_profile_set_isfile,
	na_action_profile_set_isdir, na_action_profile_set_schemes):
	New functions.

	* src/common/na-action-profile.h:
	Define ACTION_PROFILE_PREFIX as a way of identifying a profile.

	* src/common/na-utils.c:
	* src/common/na-utils.h (na_utils_dump_string_list,
	na_utils_schema_to_gslist, na_utils_schema_to_boolean):
	New functions.

	* src/nact/nact-assistant.c:
	* src/nact/nact-assistant.h:
	* src/nact/nact-assist-export.c:
	* src/nact/nact-assist-export.h:
	* src/nact/nact-assist-import.c:
	* src/nact/nact-gconf-keys.h:
	* src/nact/nact-gconf-reader.c:
	* src/nact/nact-gconf-reader.h:
	* src/nact/nact-gconf-writer.c:
	* src/nact/nact-gconf-writer.c: New files.

	* src/nact/nact-gconf-schema.c:
	* src/nact/nact-gconf-schema.h:
	* src/nact/nact-gconf-schema-writer.c:
	* src/nact/nact-gconf-schema-writer.h: Removed files.

	* src/nact/Makefile.am: Updated accordingly.

	* src/nact/base-application.c:
	* src/nact/base-application.h
	(base_application_search_for_widget): New function.

	* src/nact/base-window.c:
	Call gtk_main/gtk_main_quit when we are running an assistant.

2009-07-08 Pierre Wieser <pwieser@trychlos.org>

	* src/nact/nact-main-window.c:
	Fix post-export selection mode.

2009-07-03 Pierre Wieser <pwieser@trychlos.org>

	Export actions.

	* src/common/nautilus-actions-config.c:
	* src/common/nautilus-actions-config.h:
	* src/common/nautilus-actions-config-gconf.c:
	* src/common/nautilus-actions-config-gconf.h:
	* src/common/nautilus-actions-config-gconf-private.h:
	* src/common/nautilus-actions-config-gconf-reader.c:
	* src/common/nautilus-actions-config-gconf-reader.h:
	* src/common/nautilus-actions-config-gconf-writer.c:
	* src/common/nautilus-actions-config-gconf-writer.h:
	* src/common/nautilus-actions-config-schema-writer.c:
	* src/common/nautilus-actions-config-schema-writer.h:
	* src/common/nautilus-actions-config-schema-reader.c:
	* src/common/nautilus-actions-config-schema-reader.h: Removed files.

	* src/common/Makefile.am: Updated accordingly.

	* src/common/na-action.h: Define an export format.

	* src/common/na-utils.c:
	* src/common/na-utils.h
	(na_utils_gslist_to_schema, na_utils_boolean_to_schema):
	New functions.

	* src/nact/nact-import-export.c:
	* src/nact/nact-import-export.h: Removed files.

	* src/nact/nact-gconf-schema.c:
	* src/nact/nact-gconf-schema.h:
	* src/nact/nact-gconf-schema-writer.c:
	* src/nact/nact-gconf-schema-writer.h: New files.

	* src/nact/Makefile.am: Updated accordingly.

	* src/nact/base-window.c:
	* src/nact/base-window.h (base_window_connect):
	Removed function.

	* src/nact/nact-window.c:
	* src/nact/nact-window.h
	(nact_window_signal_connect_by_name): New function.

	* src/nact/nact-action-conditions-editor.c
	(nact_iprofile_conditions_initial_load): Use GtkBuilder size grouping.

	* src/nact/nact-iactions-list.c:
	* src/nact/nact-iactions-list.h
	(nact_iactions_list_get_selected_actions,
	nact_iactions_list_set_multiple_selection): New functions.

	* src/nact/nact-iprefs.c:
	* src/nact/nact-iprefs.h
	(nact_iprefs_get_export_folder_uri,
	nact_iprefs_save_export_folder_uri): New functions.

	* src/nact/nact-main-window.c: Implement export function.

2009-07-02 Pierre Wieser <pwieser@trychlos.org>

	* src/common/na-pivot.c (action_changed_handler):
	Use a milliseconds timeout to get a better UI reactivity.

	* src/nact/nact-action-conditions-editor.c (on_cancel_clicked):
	New function to trigger dialog response.

	* src/nact/nact-action-conditions-editor.c
	(on_initial_load_dialog): Make labels and buttons the same size.
	(on_all_widgets_showed): Call
	nact_iprofile_conditions_all_widgets_showed function.
	(on_dialog_response): Advertize parent window of a new action.

	* src/nact/nact-iactions-list.c:
	* src/nact/nact-iactions-list.h
	(nact_iactions_list_set_selection,
	nact_iactions_list_set_send_selection_changed_on_fill_list,
	nact_iactions_list_set_is_filling_list,
	on_key_press_event, on_enter_key_pressed): New functions.

	* src/nact/nact-imenu-item.c:
	* src/nact/nact-imenu-item.h (nact_imenu_item_size_labels,
	nact_imenu_item_size_buttons): New functions.

	* src/nact/nact-imenu-item.c (on_icon_changed):
	Forces the display of an empty frame where there is no icon.

	* nact/nact-iprofile-conditions.c (hide_legend_dialog):
	Fixes bug which recorded a (0,0) position when the dialog closed.

	* nact/nact-iprofile-conditions.c:
	* nact/nact-iprofile-conditions.h
	(nact_iprofile_conditions_size_labels,
	nact_iprofile_conditions_size_buttons): New functions.

	* src/nact/nact-main-window.c:
	Do not trigger on_selection_changed when filling the Actions list.
	Edit action when Enter key pressed.

	* src/nact/nact-window.c:
	* src/nact/nact-window.h (set_current_action):
	New virtual function.

	* src/nact/nautilus-actions-config.ui:
	Add tooltips to AddAction and EditAction buttons.
	Encapsulates the IconImage into a IconFrame.

2009-07-01 Pierre Wieser <pwieser@trychlos.org>

	* src/nact/base-application.c:
	* src/nact/base-application.h (recursive_search_for_child,
	search_for_child_widget, base_application_get_dialog):
	New functions.
	All properties are now prefixed with "base-application-".

	* src/nact/base-window.c:
	* src/nact/base-window.h (base_window_get_dialog,
	do_get_dialog): New functions.
	PROP_WINDOW_TOPLEVEL_WIDGET is renamed as
	PROP_WINDOW_TOPLEVEL_DIALOG.
	do_get_toplevel_widget is renamed as do_get_toplevel_dialog.
	All properties are now prefixed with "base-window-".

	* src/nact/nact-main-window.c:
	* src/nact/nact-action-conditions-editor.c:
	* src/nact/nact-action-profiles-editor.c:
	* src/nact/nact-profile-conditions-editor.c:
	Updated accordingly.

	* src/nact/nact-iactions-list.c:
	* src/nact/nact-iactions-list.h
	(nact_iactions_list_set_focus): New function.

	* src/nact/nact-iprefs.c:
	* src/nact/nact-iprefs.h
	(nact_iprefs_get_iprofile_conditions_folder_uri,
	nact_iprefs_save_iprofile_conditions_folder_uri): New functions.

	* src/nact/nact-iprofile-conditions.c:
	Fix display of icon for new actions.
	Save state and position of LegendDialog and GtkFileChooser.

	* src/nact/nact-main-window.c:
	Reset the focus to the ActionsList after each button click.

	* src/nact/nautilus-actions-config.ui:
	Add keyboard shortcuts to ActionsDialog buttons.
	Import two new dialog boxes.

2009-06-30 Pierre Wieser <pwieser@trychlos.org>

	* src/common/na-action-profile.c:
	* src/common/na-action-profile.h
	(na_action_profile_set_matchcase, na_action_profile_set_mimetypes,
	na_action_profile_set_isfiledir, na_action_profile_set_multiple,
	na_action_profile_set_scheme): New functions.

	* src/common/na-utils.c:
	* src/common/na-utils.h (na_utils_gstring_joinv,
	na_utils_string_list_to_text, na_utils_text_to_string_list,
	na_utils_remove_ascii_from_string_list): New functions.

	* src/nact/nact-action-conditions-editor.c:
	Call _dispose functions when closing the window.

	* src/nact/nact-imenu-item.c:
	* src/nact/nact-imenu-item.h (nact_imenu_item_dispose):
	New function.

	* src/nact/nact-iprofile-conditions.c:
	* src/nact/nact-iprofile-conditions.h
	(nact_iprofile_conditions_dispose): New function.

	* src/nact/nact-iprofile-conditions.c:
	All three tabs are now implemented.

	* src/nact/nact-utils.c:
	* src/nact/nact-utils.h: Removed files.

	* src/nact/nact-prefs.c:
	* src/nact/nact-prefs.h: Renamed as nact-iprefs.{c,h}.
	Define NactIPrefs interface, to be implemented by NactWindows
	which wish use GConf preferences.

	* src/nact/Makefile.am: Updated accordingly.

	* src/nact/nautilus-actions-config.ui:
	Add LegendDialog window.
	Remove all embedded action handlers (as I don't want pollute my
	public namespace with these).

2009-06-29 Pierre Wieser <pwieser@trychlos.org>

	* src/common/na-action.c:
	* src/common/na-action.h (na_action_set_tooltip,
	na_action_set_icon, na_action_are_equal, na_action_get_profile):
	New functions.

	* src/common/na-action.c
	(na_action_new_with_profile): Provides a default profile name.
	(na_action_duplicate): Provides a pointer to the duplicated action.
	(na_action_are_equal): Implements profiles comparison.

	* src/common/na-action-profile.c:
	* src/common/na-action-profile.h (na_action_profile_set_path,
	na_action_profile_set_parameters, na_action_profile_set_basenames,
	na_action_profile_are_equal):
	New functions.

	* src/common/na-action-profile.c (na_action_profile_new):
	No more accept a NULL profile name.

	* src/common/na-action-profile.c:
	* src/common/na-action-profile.h (na_action_profile_duplicate):
	The duplicated profile points to the duplicated action.

	* src/common/na-gconf.c:
	Defines an association table between GConf keys and property
	names.

	* src/common/na-iio-provider.c:
	Fist try to write to initial provider.

	* src/common/na-utils.c:
	* src/common/na-utils.h (na_utils_find_in_list,
	na_utils_string_lists_are_equal): New functions.

	* src/nact/base-application.c (display_dlg):
	New mutualized function.

	* src/nact/base-window.c:
	* src/nact/base-window.h (dialog_response):
	Returns a boolean to let the user refuse the closing.

	* src/nact/nact-action-conditions-editor.c:
	Update the dialog title if action has been modified.
	Have Close or Cancel/Save buttons depending on action status.
	Only save an action which has a not empty label.
	Implements PathBrowse button.

	* src/nact/nact-imenu-item.c:
	* src/nact/nact-imenu-item.h (get_edited_action,
	update_dialog_title, nact_imenu_item_has_label): New functions.

	* src/nact/nact-imenu-item.c:
	Implements IconBrowse button.

2009-06-28 Pierre Wieser <pwieser@trychlos.org>

	* po/POTFILES.in:
	Replace src/nact/nact.c with src/nact/nact-main-window.c.
	Replace src/nact/nautilus-actions-config.glade with
	src/nact/nautilus-actions-config.ui.

	* src/common/na-action.c:
	* src/common/na-action.h:
	UUID is no more a contruction only property.
	NAAction is now initialized with suitable default values.
	na_action_new_with_profile, na_action_get_provider: new functions.

	* src/common/na-action-profile.c:
	* src/common/na-action-profile.h:
	Profile's name is no more a construction only property.
	na_action_profile_copy function is renamed as
	na_action_profile_duplicate.

	* src/common/na-gconf.c:
	Temporarily suspend test of writability status.
	Record the last provider of an action.

	* src/common/na-iio-provider.c:
	delete_action: new function.

	* src/nact/nact-action-conditions-editor.c:
	* src/nact/nact-action-conditions-editor.h:
	* src/nact/nact-action-profiles-editor.c:
	* src/nact/nact-action-profiles-editor.h:
	* src/nact/nact-profile-conditions-editor.c:
	* src/nact/nact-profile-conditions-editor.h:
	Definitive names for dialog management.

	* src/nact/nact-imenu-item.c:
	Connect the signal handler before setting the initial icon.

	* src/nact/nact-iprofile-conditions.c:
	* src/nact/nact-iprofile-conditions.h:
	IActionConditions interface is renamed as IProfileConditions.

	* src/nact/Makefile.am:
	Updated accordingly.

	* src/nact/base-window.c:
	* src/nact/base-window.h:
	initial_load_toplevel, runtime_init_toplevel, all_widgets_showed:
	new functions.

	* src/nact/nact-imenu-item.c:
	signal_recorded: new function.

	* src/nact/nact-main-window.c:
	Implement initial_load_toplevel and runtime_init_toplevel
	functions.

	* src/nact/nact-window.c:
	nact_window_on_signal_recorded: new function.

2009-06-26 Pierre Wieser <pwieser@trychlos.org>

	Migration to GtkBuilder.
	IPivotContainer interface definition.
	IActionConditions and IMenuItem UI interface definitions.

	* configure.ac:
	Update Gtk+ dependancy to 2.12 to have gtk_builder functions.
	Remove libglade dependancy.

	* src/common/na-action-profile.c:
	* src/common/na-action.c:
	* src/common/na-gconf.c:
	* src/common/na-object.c:
	* src/common/na-pivot.c
	(instance_dispose): g_free( self->private ).

	* src/common/na-gconf.c:
	Fix typo in comment.

	* src/common/na-iio-provider.c:
	Actions list is now automatically sorted by label.

	* src/common/na-iio-provider.h:
	Move signal definition here to be usable by providers.

	* src/common/na-ipivot-container.c:
	* src/common/na-ipivot-container.h: New files.

	* src/common/na-pivot.c:
	na_pivot_get_label_sorted_actions: Removed function.
	na_pivot_add_notified, free_containers: New functions.
	Remove PROP_NOTIFIED property.
	Containers to be notified can be several to many, instead of
	just only one.
	Use NAIPivotContainer interface instead of sending a message.

	* src/common/Makefile.am: Updated accordingly.

	* src/nact/base-application.c:
	* src/nact/base-application.h
	(base_application_get_icon_name,
	base_application_get_main_window, base_application_run):
	New functions.

	* src/nact/nact-application.c:
	Records the main window to be notified of an action modification.

	* src/nact/nact-wnd-actions.c:
	* src/nact/nact-wnd-actions.h:
	Renamed to nact-main-window.{c,h}.

	* src/nact/nact-main-window.c:
	* src/nact/nact-main-window.h:
	New files.
	Implement NAIPivotContainer interface.

	* src/nact/nact-action-profile.c:
	* src/nact/nact-action-profile.h:
	New files.
	Implement NactIMenuItem and NactIActionConditions interfaces.

	* src/nact/nact-main-window.c:
	Implements NAIPivotContainer interface.

	* src/nact/base-window.c:
	* src/nact/base-window.h:
	Remove libglade stuff.
	Create the structure for derived windows/dialogs.

	* src/nact/iaction-conditions.c:
	* src/nact/iaction-conditions.h:
	* src/nact/imenu-item.c:
	* src/nact/imenu-item.h: New interface files.

	* src/nact/Makefile.am: Updated accordingly.

	* src/plugin/nautilus-actions.c:
	Implements NAIPivotContainer interface.

2009-06-20 Pierre Wieser <pwieser@trychlos.org>

	* src/common/na-gconf.c:
	Implement loading of old versions.
	Implement writing an action.

	* src/common/na-action.c:
	* src/common/na-action.h:
	* src/common/na-gconf.c:
	Add read-only attribute set when GConf key is not writable.

	* src/common/na-action.c:
	* src/common/na-action.h:
	* src/common/na-action-profile.c:
	* src/common/na-action-profile.h:
	Object properties are renamed, and moved to include file.
	Objects are created with suitable default values.
	Finalize helper functions.

	* src/common/na-iio-provider.c:
	Record the provider in each NAAction object.

2009-06-19 Pierre Wieser <pwieser@trychlos.org>

	Getting NA (Nautilus Actions) as common objects prefix.

	* src/common/na-action.c:
	* src/common/na-action.h:
	* src/common/na-action-profile.c:
	* src/common/na-action-profile.h:
	* src/common/na-gconf.c:
	* src/common/na-gconf.h:
	* src/common/na-gconf-keys.h:
	* src/common/na-iio-provider.c:
	* src/common/na-iio-provider.h:
	* src/common/na-object.c:
	* src/common/na-object.h:
	* src/common/na-pivot.c:
	* src/common/na-pivot.h:
	* src/common/na-utils.c:
	* src/common/na-utils.h: Renamed and updated accordingly.

	* src/common/na-iio-provider.c:
	* src/common/na-iio-provider.h:
	* src/common/na-gconf.c:
	* src/common/na-pivot.c:
	na_iio_provider_load_actions renamed to na_iio_provider_read_actions.

	* src/nact/base-window.c:
	* src/nact/base-window.h:
	Define and implement new class BaseWindow.

	* src/nact/nact-iactions-list.c:
	* src/nact/nact-iactions-list.h:
	Define and implement new interface NactIActionsList.

	* src/nact/nact-window.c:
	* src/nact/nact-window.h:
	Define and implement new class NactWindow.

	* src/nact/nact-wnd-actions.c:
	* src/nact/nact-wnd-actions.h:
	Define and implement new class NactWndActions.

	* src/nact/Makefile.am:
	Updated accordingly.

2009-06-18 Pierre Wieser <pwieser@trychlos.org>

	Begin with porting NACT to new object hierarchy.

	* src/common/nact-action.c:
	* src/common/nact-action.h (nact_action_duplicate,
	nact_action_get_version, nact_action_get_icon,
	nact_action_set_new_uuid): New functions.

	* src/common/nact-iio-provider.c:
	* src/common/nact-iio-provider.h (+nact_iio_provider_write_action):
	New function.

	* src/common/nact-pivot.c:
	* src/common/nact-pivot.h (nact_pivot_get_label_sorted_actions,
	nact_pivot_get_action, nact_pivot_add_action):
	New functions.

	* src/nact/base-application.c:
	* src/nact/base-application.h: New base class.

	* src/nact/nact-application.c:
	* src/nact/nact-application.h: Updated accordingly.

2009-06-14 Pierre Wieser <pwieser@trychlos.org>

	* po/POTFILES.in: Add src/nact-application.c.

	* src/nact/nact-application.c:
	Fix error message to not embed markup.

2009-06-12 Pierre Wieser <pwieser@trychlos.org>

	Fix #353198 – Single window mode for Nact.

	* configure.ac:
	Add libunique dependancy.
	Cleanup the code.

	* src/nact/nact.c:
	* src/nact/nact.h(nact_init_dialog):
	Return the newly created GtkWindow.

	* src/nact/nact-main.c (main):
	Call gtk_init at the very beginning of the program.

	* src/nact/nact-application.c:
	Check for already running instance, and display a message if any.

2009-06-11 Pierre Wieser <pwieser@trychlos.org>

	* src/common/nact-pivot.c:
	* src/common/nact-pivot.h: Fix comment typo.

	* src/nact/nact.c:
	* src/nact/nact.h:
	Externalize main function in nact-main.c.
	init_dialog becomes public as nact_init_dialog.

	* src/nact/nact-application.c:
	* src/nact/nact-application.h: New NactApplication class.
	Initialization stuff goes to nact-application.c:startup_appli().

	* src/nact/nact-main.c: New file.

	* src/nact/Makefile.am: Updated accordingly.

2009-06-10 Pierre Wieser <pwieser@trychlos.org>

	* configure.ac:
	Bump version number.
	Update required Glib version to make sure to have GIO.

	* src/common/nact-action-profile.c (nact_action_profile_free):
	Fix disallocation of the profile by calling g_object_unref.

	* src/common/nact-action-profile.c:
	Remove all gnome-vfs code.

	* src/plugin/nautilus-actions.c:
	Move gnome_vfs_init call to nact_action_profile_parse_parameters.
	Remove useless include files.

2009-06-09 Pierre Wieser <pwieser@trychlos.org>

	* configure.ac: Bump version number for 1.11.0 release.

	* src/common/nact-action.c:
	* src/common/nact-action.h
	(nact_action_get_profile_ids, nact_action_free_profile_ids,
	 nact_action_has_profile, nact_action_get_profile,
	 nact_action_free_profile):
	Remove functions and cleanup the code.

	* src/common/nact-action-profile.c:
	* src/common/nact-action-profile.h
	(nact_action_profile_load): Remove function and cleanup the code.

	* src/common/nact-gconf.c:
	* src/common/nact-iio-provider.c:
	Cleanup the code, adding documentation to public functions.

	* src/common/nact-object.c:
	* src/common/nact-object.h
	(nact_object_empty_property): Remove function and cleanup the code.

	* src/common/nact-pivot.c:
	* src/common/nact-pivot.h
	(nact_pivot_get_action): Remove function and cleanup the code.

	* src/common/nact-uti.c:
	* src/common/nact-uti.h (nactuti_free_object_list): Remove function.

	* src/plugin/nautilus-actions.c:
	The plugin now uses the new object hierarchy to handle menu items.
	Fix #580378 (context menu doesn't update) reported by James Campos.
	Cleanup the code.

	* src/plugin/nautilus-actions-test.c:
	* src/plugin/nautilus-actions-test.h:
	* src/plugin/nautilus-actions-utils.c:
	* src/plugin/nautilus-actions-utils.h:
	Removed files as functions are now integrated in NactActionProfile
	class.

	* src/utils/nautilus-check-actions-changed.c:
	* src/utils/Makefile.am:
	No more build useless nautilus-actions-check-actions-changed program.

2009-06-08 Pierre Wieser <pwieser@trychlos.org>

	* src/common/nact-action-profile.c:
	* src/common/nact-action-profile.h:
	* src/common/nact-action.c:
	* src/common/nact-action.h:
	* src/common/nact-gconf.c:
	* src/common/nact-object.c:
	* src/common/nact-object.h:
	* src/common/nact-pivot.c:
	* src/common/nact-pivot.h:
	* src/plugin/nautilus-actions.c:
	Reload list of actions instead of trying to update each object.

2009-06-07 Pierre Wieser <pwieser@trychlos.org>

	* src/common/nact-pivot.c:
	* src/common/nact-pivot.h:
	* src/common/nact-gconf.c:
	Update the NactPivotNotify structure to handle profile name.

2009-06-07 Pierre Wieser <pwieser@trychlos.org>

	Install the notification system.

	* src/common/nautilus-actions.c:
	Define new message "notify_nautilus_of_action_changed".

	* src/common/nact-pivot.c:
	Define new message "notify_pivot_of_action_changed".

	* src/common/nact-pivot.h:
	Rename and update nactPivotValue structure to NactPivotNotify.

	* src/common/gconf.c:
	Send message to NactPivot on action changed.

2009-06-06 Pierre Wieser <pwieser@trychlos.org>

	Remove NactIIOClient interface.
	Fix make distcheck.
	Fix Glade file adressing.

	* src/common/nact-iio-client.c:
	* src/common/nact-iio-client.h:
	* src/common/nact-io-client.c:
	* src/common/nact-io-client.c:
	Remove files.

	* src/common/Makefile.am:
	* src/common/nact-action-profile.c:
	* src/common/nact-action-profile.h:
	* src/common/nact-action.c:
	* src/common/nact-action.h:
	* src/common/nact-gconf.c:
	* src/common/nact-gconf.h:
	* src/common/nact-iio-provider.c:
	* src/common/nact-iio-provider.h:
	* src/common/nact-pivot.c:
	* src/common/nact-pivot.h:
	* src/nact/Makefile.am:
	* src/utils/Makefile.am:
	Updated accordingly.

	* src/common/nact-uti-lists.c:
	* src/common/nact-uti-lists.h:
	New files after renaming previous uti-lists.{c,h}.

2009-06-05 Pierre Wieser <pwieser@trychlos.org>

	Create pivot data structure NactPivotValue

	* src/common/nact-gconf.c (value_to_pivot):
	New function.

	* src/common/nact-iio-provider.c
	(nact_iio_provider_load_profile_properties):
	Fix thisfn typo.

	* src/common/nact-pivot.c
	* src/common/nact-pivot.h (nact_pivot_free_pivot_value):
	New function.

2009-06-04 Pierre Wieser <pwieser@trychlos.org>

	Create a whole new object model, and defines some communication
	interfaces.

	* src/plugin/nautilus-actions.c:
	* src/plugin/nautilus-actions.h:
	Connect and load list of NactAction actions.

	* src/common/nact-gconf.c:
	* src/common/nact-gconf.h
	(nact_gconf_dispose, nact_gconf_dump): New functions.

	* src/common/uti-lists.c:
	* src/common/util-lists.h
	(nactuti_free_string_list, nactuti_duplicate_string_list):
	New functions.

	* src/common/nact-action.c:
	* src/common/nact-action.h:
	* src/common/nact-action-profile.c:
	* src/common/nact-action-profile.h:
	* src/common/nact-gconf.c:
	* src/common/nact-gconf.h:
	Updated accordingly.

	* src/common/nact-iio-client.c:
	* src/common/nact-iio-client.h:
	* src/common/nact-iio-provider.c:
	* src/common/nact-iio-provider.c:
	* src/common/nact-io-client.c:
	* src/common/nact-io-client.h:
	New files.

2009-06-01 Pierre Wieser <pwieser@trychlos.org>

	* configure.ac: Have a more funny package string.

	* src/plugin/nautilus-module.c: Syslog at module initialization.

	* src/plugin/nautilus-actions.c:
	* src/plugin/nautilus-actions.h:
	Move NautilusActions object data members to a private area.
	Add forward declarations of, remove prefix from, static functions.
	Do nothing on get_background_items callback.

	* src/common/nact-action.c:
	* src/common/nact-action.h:
	* src/common/nact-action-profile.c:
	* src/common/nact-action-profile.h:
	* src/common/nact-gconf.c:
	* src/common/nact-gconf.h:
	* src/common/nact-gconf-keys.h:
	* src/common/nact-storage.c:
	* src/common/nact-storage.h:
	New files, preparing for a new object hierarchy (with shorter names).

	* src/common/uti-lists.c:
	* src/common/uti-lists.h:
	(nactuti_free_string_list) new function.

2009-05-29 Pierre Wieser <pwieser@trychlos.org>

	Move all sources directories under src/
	Remove one directory level when installing Glade file
	Rename libnautilus-actions/libnautilus-actions to common/libnact

	* configure.ac:
	* Makefile.am:
	Build and install po/ directory after sources.

	* All sources: Updated accordingly.

	* src/nact/Makefile.am:
	Remove one directory level when installing Glade file.

2009-05-29 Pierre Wieser <pwieser@trychlos.org>

	Include a short application description in all source headers

	* plugin/nautilus-module.c:
	Renamed from plugin/nautilus-actions-module.c.

	* plugin/nautilus-actions.c:
	Move log handler to nautilus-module.c.

	* plugin/Makefile.am:
	Updated accordingly.

2009-05-29 Pierre Wieser <pwieser@trychlos.org>

	* configure.ac:
	Bump version number to 1.11 unstable.

2009-05-29 Pierre Wieser <pwieser@trychlos.org>

	Prepare for the 1.10.1 release

2009-05-28 Pierre Wieser <pwieser@trychlos.org>

	* plugin/nautilus-actions.c (nautilus_actions_get_file_items):
	Fix iteration through profiles list.
	Do not search through actions when the Nautilus-provided list is empty.

	* plugin/nautilus-actions.c (get_hash_keys):
	Remove no more used function.

	* nact/nautilus-actions-config.glade:
	Remove (useless) 'field_changed_cb' handler from the menu icon.

	* nact/nact-editor.c:
	* nact/nact-action-editor.c:
	Restore tooltip display for the icon name depending on Gtk+ version.

	* nact/nact.c:
	* nact/nautilus-actions-config.glade:
	Double-click on an action opens the editor.

	* nact/nact-profile-editor.c:
	Enable the OK button as soon as required fields are filled.

	* m4/nact-maintainer-mode.m4:
	* plugin/nautilus-actions.c:
	Only enable syslog'ed debug messages when in maintainer mode.

	* libnautilus-actions/Makefile.am:
	Remove trailing whitespace.

2009-05-25 Pierre Wieser <pwieser@trychlos.org>

	* configure.ac:
	* Makefile.am:
	Reorganize install order so that plugin be installed last.

	* icons/Makefile.am:
	* libnautilus-actions/Makefile.am:
	* nact/Makefile.am:
	* plugin/Makefile.am:
	* utils/Makefile.am:
	Cleanup Makefile.am.

	* .gitignore: Update to ignore Glade work files.

	* plugin/Makefile.am:
	* libnautilus-actions/Makefile.am:
	Define G_LOG_DOMAIN variable.

	* libnautilus-actions/nautilus-actions-config.c:
	* libnautilus-actions/nautilus-actions-config.h:
	nautilus_actions_config_action_free_all_profile_names,
	nautilus_actions_config_action_get_first_profile_name,
	nautilus_actions_config_action_get_profiles_count,
	nautilus_actions_config_action_dump: new functions.

	* nact/nact-action-editor.c:
	* nact/nact-action-editor.h: New files to be able to edit an action
	without having to deal with the profile stuff.

	* nact/nautilus-actions-config.glade:
	Add EditActionDialogExt dialog.

	* nact/Makefile.am:
	* nact/nact-editor.c:
	* nact/nact-editor.h:
	* nact/nact-profile-editor.c:
	* nact/nact-profile-editor.h:
	* nact/nact-utils.c:
	* nact/nact-utils.h:
	* po/POTFILES.in:
	* po/ChangeLog: Updated accordingly.

2009-05-18 Pierre Wieser <pwieser@trychlos.org>

	Fix Glade regression I introduced myself when ansi-fying C sources !

	* *.c, *.h: Almost all sources files impacted.

	* m4/nact-maintainer-mode.m4: Creation.

	* plugin/nautilus-actions.c: Add debug mode to syslog.

2009-05-17 Pierre Wieser <pwieser@trychlos.org>

	Releasing 1.10.0

	* configure.ac: Update version number.

2009-05-17 Pierre Wieser <pwieser@trychlos.org>

	Make all sources ansi-compliant

	* configure.ac: Use NACT_GNOME_COMPILE_WARNINGS	(see #582860).

	* m4/nact-compiler-flags: Creation.

	* *.c, *.h: Update almost all sources to be ansi-compliant.

2009-05-16 Pierre Wieser <pwieser@trychlos.org>

	* configure.ac: Created from configure.in,
	update all Makefile.am, replacing deprecated INCLUDES with AM_CPPFLAGS.

	* update po files

	* Makefile.am: Add DISTCLEANFILES,
	add DISTCHECK_CONFIGURE_FLAGS to be able to make distcheck successfully.

	* icons/16x16/Makefile.am:
	* icons/22x22/Makefile.am:
	* icons/32x32/Makefile.am:
	* icons/48x48/Makefile.am:
	* icons/scalable/Makefile.am:
	* nact/Makefile.am:
	* plugin/Makefile.am:
	* utils/Makefile.am:
	Add EXTRA_DIST to be able to make distcheck successfully.

2009-05-13 Pierre Wieser <pwieser@trychlos.org>

	* nact/nact-editor.c:
	* libnautilus-actions/nautilus-actions-config.c:
	* libnautilus-actions/nautilus-actions-config-schema-reader.c:
	Fix typos. Fixes #522605 reported by Andre Klapper <a9016009%40gmx.de>.

	* libnautilus-actions/nautilus-actions-config-gconf-private.h:
	Remove a quote. Fixes #573365 reported by Sergej
	<sergio.durzu@ildeposito.org>.

2009-05-12 Pierre Wieser <pwieser@trychlos.org>

	* ChangeLog, ChangeLog-2008:
	Split enormeous ChangeLog, only keeping recent history.

2009-05-12 Bruce van der Kooij <brucevdkooij@gmail.com>

	* plugin/nautilus-actions.c:
	Call gnome_vfs_init at class initialization. Fixes #574919.

2009-05-12 Pierre Wieser <pwieser@trychlos.org>

	* nautilus-actions.doap: Update short description.
	* MAINTAINERS: Update to point to nautilus-actions.doap.

2009-04-13  Christian Persch  <chpe@gnome.org>

	* autogen.sh:
	* configure.in:
	* po/LINGUAS:
	Use newer intltool so the recent build break doesn't occur again.

2009-04-12  Christian Persch  <chpe@gnome.org>

	* po/LINGUAS: Fix the build by removing extra newline.

2009-01-20  Stéphane Raimbault  <stephane.raimbault@gmail.com>

	* nact/nautilus-actions-config.glade:
	Marked 'Duplicate' string for translation. Fixes #568366.
